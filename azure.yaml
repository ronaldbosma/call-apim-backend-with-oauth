# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: call-apim-backend-with-oauth
metadata:
  template: call-apim-backend-with-oauth@0.0.1
hooks:
  postprovision:
    - shell: pwsh
      run: ./hooks/postprovision-create-and-store-client-certificate.ps1
      interactive: true
    - shell: pwsh
      run: ./hooks/postprovision-create-and-store-client-secret.ps1
      interactive: true
    - shell: pwsh
      run: ./hooks/postprovision-deploy-apis.ps1
      interactive: true
  predown:
    - shell: pwsh
      run: ./hooks/predown-remove-app-registrations.ps1
      interactive: true
    - shell: pwsh
      run: ./hooks/predown-remove-law.ps1
      interactive: true
requiredVersions: 
  azd: ">= 1.17.0"  # azd version 1.17.0 or later is required because of Microsoft.Graph Bicep extension v1.0.0 and removal of the extensibility feature flag.
